<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>谈谈BFC | voya</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><script>var GLOBAL = { 
  root: '/',
  algolia: {"appId":"YJNXHO5R7M","apiKey":"ab4a29bb746e8e08c396964ebbfa38a7","indexName":"blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  localSearch: undefined
} </script><link rel="icon" href="/favicon.ico"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是BFC"><span class="toc-number">1.</span> <span class="toc-text">什么是BFC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BFC-规则概述"><span class="toc-number">2.</span> <span class="toc-text">BFC 规则概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#如何创建BFC"><span class="toc-number">2.1.</span> <span class="toc-text">如何创建BFC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BFC特性"><span class="toc-number">2.2.</span> <span class="toc-text">BFC特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BFC应用举例——多栏布局"><span class="toc-number">2.3.</span> <span class="toc-text">BFC应用举例——多栏布局</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#如何解决"><span class="toc-number">2.3.1.</span> <span class="toc-text">如何解决</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://oe54phg1r.bkt.clouddn.com/blog/2017-09-26-2017-07-26-075816%20.jpg"></div><div class="author-info__name text-center">voya</div><div class="author-info__description text-center">既能朝九晚五，也要浪迹天涯，谦卑平常</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../archives"><span class="pull-left">Articles</span><span class="pull-right">149</span></a><a class="author-info-articles__tags article-meta" href="../../tags"><span class="pull-left">Tags</span><span class="pull-right">32</span></a><a class="author-info-articles__categories article-meta" href="../../categories"><span class="pull-left">Categories</span><span class="pull-right">8</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://oe54phg1r.bkt.clouddn.com/blog/2017-09-26-2017-08-16-adam-whitlock-270558-cmp.jpg);"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">voya</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">谈谈BFC</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2016-04-11</time><span class="post-meta__separator">|</span><i class="fa fa-tag post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="../../tags/CSS/">CSS</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1,349</span><span class="post-meta__separator">|</span><span>Reading time: 5 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>BFC牵扯了许多东西，能力时间有限，将逐渐补充先关内容。</p>
<h2 id="什么是BFC"><a href="#什么是BFC" class="headerlink" title="什么是BFC"></a>什么是BFC</h2><p>BFC（Block Formating Context）被称为块级格式化上下文。直白来讲，BFC只是一个概念，但凡符合这个定义的，便遵循BFC的渲染规则。</p>
<p><a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="noopener">官网描述</a>如下：</p>
<blockquote>
<p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>
</blockquote>
<p>也就是说，浮动、绝对定位元素（<code>position</code> 为 <code>absolute</code> 或 <code>fixed</code>）、行内块元素 <code>display:inline-block</code>、表格单元格 <code>display:table-cell</code>、表格标题 <code>display:table-caption</code> 以及 <code>overflow</code> 属性值不为 <code>visible</code> 的元素（除了该值被传播到视点 viewport 的情况）将创建一个新的块级格式化上下文。</p>
<a id="more"></a>
<blockquote>
<p>In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the ‘margin’ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.</p>
</blockquote>
<p>在BFC内，盒子从<strong>包含块</strong>（这个概念要清楚(⊙o⊙)哦）顶端开始，按垂直方向一个接一个排列。相邻两个盒子之间的垂直距离有margin决定，但并非简单的两个margin之和，而是采用所谓的外边距折叠（Collapsing Margins ）</p>
<blockquote>
<p>In a block formatting context, each box’s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a box’s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats).</p>
</blockquote>
<p>在BFC中，每个盒子的左外边距紧贴包含块（对于从右往左的布局中，正好相反）。需要注意的是，即使是浮动元素，也遵循这个规则，除非我们为这个盒子新建了一个BFC。</p>
<h2 id="BFC-规则概述"><a href="#BFC-规则概述" class="headerlink" title="BFC 规则概述"></a>BFC 规则概述</h2><p>根据官方描述，对BFC触发条件以及渲染规则总结：</p>
<h3 id="如何创建BFC"><a href="#如何创建BFC" class="headerlink" title="如何创建BFC"></a>如何创建BFC</h3><ol>
<li>浮动：<code>float</code>不为<code>none</code></li>
<li><code>postion</code>等于<code>absolute</code>或者<code>flex</code></li>
<li><code>display</code>等于<code>table-cell</code>、<code>table-caption</code>、<code>inline-block</code>、<code>flex</code> 或 <code>inline-flex</code></li>
<li><code>overflow</code>不为<code>visible</code></li>
</ol>
<p>这几个条件各有利弊，结合具体情况灵活使用。</p>
<h3 id="BFC特性"><a href="#BFC特性" class="headerlink" title="BFC特性"></a>BFC特性</h3><ol>
<li>属于同一BFC的相邻元素会发生外边距折叠（换句话说，如果不属于同一个BFC，那就不会折叠了）</li>
<li>BFC中的<code>float</code>元素会撑开容器</li>
<li>在BFC中，每个盒子的左外边距紧贴包含块</li>
</ol>
<h3 id="BFC应用举例——多栏布局"><a href="#BFC应用举例——多栏布局" class="headerlink" title="BFC应用举例——多栏布局"></a>BFC应用举例——多栏布局</h3><p>借用百度ife的一个任务：</p>
<p><strong>效果图：</strong></p>
<p><img src="http://7fvhf8.com1.z0.glb.clouddn.com/ifetask_1_3_1.png" alt="多栏布局"><br><strong>要求：</strong>改变中间一栏的内容长度，以确保在中间一栏较高和右边一栏较高时，父元素的高度始终为子元素中最高的高度</p>
<p>此题有多种优秀解决方案，在这我们关注如何利用BFC解决（这也是目前我认为此题最简单的解法）。</p>
<p><strong>解题思路：</strong></p>
<p>我们先让左侧和右侧站好位，剩下的空间给中间的模块。<br>左侧和右侧的两个盒子，那就直接采用float。但是有两个需要解决的地方：</p>
<ol>
<li>一个元素浮动时，其他内容会“环绕”该元素。结果就是如果两个侧栏的高度小于中间栏，那中间栏就会环绕两个侧栏了。</li>
<li>浮动元素已经从文档的正常流中删除，存在高度塌陷。当左右侧栏的高度均大于中间栏的高度，父元素高度无法撑开。</li>
</ol>
<h4 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h4><ul>
<li><p>避免环绕：首先要明白为何会存在“环绕”，原因在于，在BFC中，每个盒子的左外边距紧贴包含块的左侧。<br>  解决方法也很清楚了，让中间栏创建一个新的BFC就可以了。</p>
</li>
<li><p>高度：上文说过，BFC可以包含浮动元素；所以只要为父元素创建BFC够了。</p>
</li>
</ul>
<p><strong>HTML代码</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left-box"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/logo.jpeg"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>九歌<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right-box"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/qiu.jpeg"</span> <span class="attr">alt</span>=<span class="string">"秋"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/rui.png"</span> <span class="attr">alt</span>=<span class="string">"瑞"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/voya.jpeg"</span> <span class="attr">alt</span>=<span class="string">"运"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-box"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>一张褪色的照片</span><br><span class="line">好像带给我一点点怀念</span><br><span class="line">巷尾老爷爷卖的热汤面</span><br><span class="line">味道弥漫过旧旧的后院</span><br><span class="line">流浪猫睡熟在摇晃秋千</span><br><span class="line">夕阳照了一遍他咪着眼</span><br><span class="line">那张同桌寄的明信片</span><br><span class="line">安静的躺在课桌的里面</span><br><span class="line">快要过完的春天</span><br><span class="line">还有雕刻着图案的门帘</span><br><span class="line">窄窄的长长的过道两边</span><br><span class="line">老房子依然升起了炊烟</span><br><span class="line">刚刚下完了小雨的季节</span><br><span class="line">爸妈又一起走过的老街</span><br><span class="line">记不得哪年的哪一天</span><br><span class="line">很漫长又很短暂的岁月</span><br><span class="line">现在已经回不去</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>CSS</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eeeeee</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left-box</span>,<span class="selector-class">.center-box</span>,<span class="selector-class">.right-box</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left-box</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">158px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left-box</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left-box</span> <span class="selector-tag">h2</span>&#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right-box</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">box-sizing</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center-box</span>&#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info">voya</span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info">http://www.voyax.meposts/44803/</span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../tags/CSS/">CSS</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="../279/"><i class="fa fa-chevron-left">  </i><span>ife前端任务-三栏布局</span></a></div><div class="next-post pull-right"><a href="../38426/"><span>关于ES6中let关键字的疑惑</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">©2016 - 2018 By voya</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Hosted by - </span><a href="https://pages.coding.me/"><span>Coding Pages</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.3"></script><script src="/js/fancybox.js?version=1.3"></script><script src="/js/sidebar.js?version=1.3"></script><script src="/js/copy.js?version=1.3"></script><script src="/js/fireworks.js?version=1.3"></script><script src="/js/transition.js?version=1.3"></script><script src="/js/scroll.js?version=1.3"></script><script src="/js/head.js?version=1.3"></script></body></html>