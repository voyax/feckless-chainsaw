<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="像孩子一样写代码"><meta name="keywords" content="CSS, JavaScript, NodeJS, Vue, React, Sketch, Git"><title>Fix 'jumping scrollbar' issue using only CSS—— Ayke van Laëthem - voya</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="/categories/365/"><span>忆</span></a></li><li><a href="/categories/css-tutorial/"><span>CSS 教程</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">Fix 'jumping scrollbar' issue using only CSS—— Ayke van Laëthem</h1><ul class="meta"><li><i class="icon icon-author"></i>voya</li><li><i class="icon icon-clock"></i>7 Minutes</li><li><i class="icon icon-calendar"></i>2015年2月6日</li></ul></div></div><div class="article-content" style="max-width:700px"><p>Ayke van Laëthem – Fix ‘jumping scrollbar’ issue using only CSS<script src="./Ayke van Laëthem – Fix 'jumping scrollbar' issue using only CSS_files/common.js" async></script></p>
<article class="post">When centering a page with CSS like <code>margin: 0 auto;</code>, there’s a small gotcha: the page will ‘jump’ a little on certain browsers when navigating between short and long pages. This is because the scrollbar gets hidden with short pages and is shown again with longer pages, which makes the page move a little horizontally.<br><br>The <a href="http://css-tricks.com/eliminate-jumps-in-horizontal-centering-by-forcing-a-scroll-bar/" target="_blank" rel="external">classic fix</a> for this is the following css:<br><br>    html {<br>        overflow-y: scroll;<br>    }<br>    <code>&lt;/pre&gt;
    This makes the scrollbar always appear on the page, no matter whether it&#39;s required or not. When the scrollbar is not needed, the scrollbar will be grayed out but will stay the same width. The page doesn&#39;t jump, and usability is preserved.

    This is all nice, but what if we could have the cake and eat it too? In other words, what if we were able to only show the scrollbar when it&#39;s needed, and not have this jumping effect?

    I found a solution using</code>100vw<code>.</code>100vw<code>is the viewport width (including the scrollbar, and</code>100%<code>width (measured on the</code>&lt;html&gt;<code>element) is the width of the viewport excluding the scrollbar. Using a little CSS</code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/calc" target="_blank" rel="external">calc</a>()<code>trickery, we can give the page an (invisible) margin on the left that is exactly as wide as the scrollbar and disappears when the scrollbar disappears. That way, the margin on the right (the scrollbar) and on the left (created by us) is always the same.
    &lt;pre&gt;</code>html {<br>        margin-left: calc(100vw - 100%);<br>        margin-right: 0;<br>    }<br>    <code>&lt;/pre&gt;
    **Note**: calculating the scrollbar width this way [only works](http://lists.w3.org/Archives/Public/www-style/2013Jan/0616.html) when the</code>&lt;html&gt;<code>element has</code>overflow: auto;<code>.

    There&#39;s one small issue: when using [responsive web design](http://en.wikipedia.org/wiki/Responsive_web_design) (which you should!), it gets quite obvious that the margin at the left is bigger than at the right when the page is made smaller. This won&#39;t be an issue on mobile because scrollbars aren&#39;t normally shown there, but it just looks ugly on a desktop browser when the browser is resized. This can be fixed by only enabling this feature on wider viewports:
    &lt;pre&gt;</code>@media screen and (min-width: 960px) {<br>        html {<br>            margin-left: calc(100vw - 100%);<br>            margin-right: 0;<br>        }<br>    }<br>    <code>&lt;/pre&gt;
    The</code>960px<code>is arbitrary: just use something that&#39;s somewhat bigger than your webpage (about</code>150px<code>will do).

    This trick works in most new browsers, and it degrades gracefully in older browsers (the page will just keep on jumping). Older browsers won&#39;t understand the rule so they&#39;ll just skip it.

    Supporting browsers include IE9+, Chrome and Firefox, but unfortunately Opera (Classic) and Safari 7 don&#39;t support it. I think Safari doesn&#39;t work due to a WebKit bug in handling</code>calc()<code>combined with the new viewport units (</code>vw<code>,</code>vh<code>,</code>vmin<code>and</code>vmax<code>). I don&#39;t know about Opera Classic, but newer Opera versions based on the Chromium source code should work as this trick works just fine in Chrome.

    * * *

    This is my first post on this blog. I hope it will be useful for someone. At the same time, this post is a proof-of-concept that the blog actually works, as I wrote the blogging engine myself.

    * * *

    ## Update

    Ater being picked up by [CSS-Tricks](http://css-tricks.com/), I burned through about 1GB of bandwidth. As the biggest part of the page is the ±60kb icon in the top (HTML and CSS is just a few kb each), I guess that are about 15000 unique visitors (!). I&#39;m new to blogging, and suddenly having so many pageviews is… very surprising.

    Anyway, I got a few replies to this post. I discovered them as external links in Google Webmaster Tools. I did not have an &quot;[about me](http://aykevl.nl/about)&quot; page back then and I still haven&#39;t got [pingbacks](http://en.wikipedia.org/wiki/Pingback) or statistics of any form implemented, so GWT is the only way I can find out about links to my site.

    First of all, [Mark Senff](http://www.marksenff.com/front-end/even-more-elegant-fix-jumping-scrollbar-issue/) investigated it and provided an alternative solution:
    &lt;pre&gt;</code>html {<br>        width:100vw;<br>        overflow-x:hidden;<br>    }<br><br>This has the side-effects that it will hide the right part of the page as the scrollbar hides that part, and it will disable horizontal scrolling. So I personally would not use it.<br><br>My scrollbar trick is only intended for <em>centered content</em>, something that may not have been clear. The example he gives includes a header that takes up the full width of the browser screen and that is mostly left-aligned. Of course, such a header wouldn’t jump a lot. The text beneath, in comparison, would be well suited for it, and I found out the trick can be applied to a part of the page just fine. I’ve put an ugly example of that up at <a href="http://codepen.io/anon/pen/NPgbKP" target="_blank" rel="external">Codepen.io</a>.<br><br>Some other mentions on the web include:<br><br><em>   <a href="http://smithy.co/who-we-are/" target="_blank" rel="external">Edwin Smith</a> mentioned it on his blog on <a href="http://smithy.co/2014/12/fix-jumping-scrollbar-when-switching-pages/" target="_blank" rel="external">Smithy.com</a>.
</em>   <a href="http://codepen.io/elstgav/" target="_blank" rel="external">Gavin Elster</a> made a live (and good-looking) example on <a href="http://codepen.io/elstgav/details/myEJNv" target="_blank" rel="external">Codepen.io</a>. I forked that one to give the example above, but my version is very ugly in comparison :)<br>Thank you all!<br><br><em> </em> *<br><br>原文链接：<a href="http://aykevl.nl/2014/09/fix-jumping-scrollbar" target="_blank" rel="external">http://aykevl.nl/2014/09/fix-jumping-scrollbar</a>&nbsp;<br><br></article>

</div><div class="article-meta" style="max-width:700px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">13</span></li></ul></div><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/学习笔记/">学习笔记</a><span class="category-list-count">45</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/posts/31494/"><i class="icon icon-arror-left"></i></a></li><li><a href="/posts/57868/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="bottom"><p class="copyright">© 2017 voya<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>