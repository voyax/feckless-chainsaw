<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Fix 'jumping scrollbar' issue using only CSS—— Ayke van Laëthem | voya</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.3"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><script>var GLOBAL = { 
  root: '/',
  algolia: {"appId":"TJ6WR04MZ3","apiKey":"81961c3645425e892e7caa399f73e5b2","indexName":"blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: undefined
} </script><link rel="icon" href="/favicon.ico"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://oe54phg1r.bkt.clouddn.com/blog/2017-09-26-2017-07-26-075816%20.jpg"></div><div class="author-info__name text-center">voya</div><div class="author-info__description text-center">Reading, Collecting, Thinking and Doing</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../archives"><span class="pull-left">文章</span><span class="pull-right">150</span></a><a class="author-info-articles__tags article-meta" href="../../tags"><span class="pull-left">标签</span><span class="pull-right">32</span></a><a class="author-info-articles__categories article-meta" href="../../categories"><span class="pull-left">分类</span><span class="pull-right">8</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://oe54phg1r.bkt.clouddn.com/blog/2017-09-26-2017-08-16-adam-whitlock-270558-cmp.jpg);"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">voya</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">Fix 'jumping scrollbar' issue using only CSS—— Ayke van Laëthem</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2015-02-06</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"> </i><a class="post-meta__categories" href="../../categories/学习笔记/">学习笔记</a><span class="post-meta__separator">|</span><i class="fa fa-tag post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="../../tags/CSS/">CSS</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">879</span><span class="post-meta__separator">|</span><span>阅读时长: 5 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>Ayke van Laëthem – Fix ‘jumping scrollbar’ issue using only CSS<script src="./Ayke van Laëthem – Fix 'jumping scrollbar' issue using only CSS_files/common.js" async></script></p>
<article class="post">When centering a page with CSS like <code>margin: 0 auto;</code>, there’s a small gotcha: the page will ‘jump’ a little on certain browsers when navigating between short and long pages. This is because the scrollbar gets hidden with short pages and is shown again with longer pages, which makes the page move a little horizontally.<br><br>The <a href="http://css-tricks.com/eliminate-jumps-in-horizontal-centering-by-forcing-a-scroll-bar/" target="_blank" rel="noopener">classic fix</a> for this is the following css:<br><br>    html {<br>        overflow-y: scroll;<br>    }<br>    <code>&lt;/pre&gt;
    This makes the scrollbar always appear on the page, no matter whether it&#39;s required or not. When the scrollbar is not needed, the scrollbar will be grayed out but will stay the same width. The page doesn&#39;t jump, and usability is preserved.

    This is all nice, but what if we could have the cake and eat it too? In other words, what if we were able to only show the scrollbar when it&#39;s needed, and not have this jumping effect?

    I found a solution using</code>100vw<code>.</code>100vw<code>is the viewport width (including the scrollbar, and</code>100%<code>width (measured on the</code>&lt;html&gt;<code>element) is the width of the viewport excluding the scrollbar. Using a little CSS</code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/calc" target="_blank" rel="noopener">calc</a>()<code>trickery, we can give the page an (invisible) margin on the left that is exactly as wide as the scrollbar and disappears when the scrollbar disappears. That way, the margin on the right (the scrollbar) and on the left (created by us) is always the same.
    &lt;pre&gt;</code>html {<br>        margin-left: calc(100vw - 100%);<br>        margin-right: 0;<br>    }<br>    <code>&lt;/pre&gt;
    **Note**: calculating the scrollbar width this way [only works](http://lists.w3.org/Archives/Public/www-style/2013Jan/0616.html) when the</code>&lt;html&gt;<code>element has</code>overflow: auto;<code>.

    There&#39;s one small issue: when using [responsive web design](http://en.wikipedia.org/wiki/Responsive_web_design) (which you should!), it gets quite obvious that the margin at the left is bigger than at the right when the page is made smaller. This won&#39;t be an issue on mobile because scrollbars aren&#39;t normally shown there, but it just looks ugly on a desktop browser when the browser is resized. This can be fixed by only enabling this feature on wider viewports:
    &lt;pre&gt;</code>@media screen and (min-width: 960px) {<br>        html {<br>            margin-left: calc(100vw - 100%);<br>            margin-right: 0;<br>        }<br>    }<br>    <code>&lt;/pre&gt;
    The</code>960px<code>is arbitrary: just use something that&#39;s somewhat bigger than your webpage (about</code>150px<code>will do).

    This trick works in most new browsers, and it degrades gracefully in older browsers (the page will just keep on jumping). Older browsers won&#39;t understand the rule so they&#39;ll just skip it.

    Supporting browsers include IE9+, Chrome and Firefox, but unfortunately Opera (Classic) and Safari 7 don&#39;t support it. I think Safari doesn&#39;t work due to a WebKit bug in handling</code>calc()<code>combined with the new viewport units (</code>vw<code>,</code>vh<code>,</code>vmin<code>and</code>vmax<code>). I don&#39;t know about Opera Classic, but newer Opera versions based on the Chromium source code should work as this trick works just fine in Chrome.

    * * *

    This is my first post on this blog. I hope it will be useful for someone. At the same time, this post is a proof-of-concept that the blog actually works, as I wrote the blogging engine myself.

    * * *

    ## Update

    Ater being picked up by [CSS-Tricks](http://css-tricks.com/), I burned through about 1GB of bandwidth. As the biggest part of the page is the ±60kb icon in the top (HTML and CSS is just a few kb each), I guess that are about 15000 unique visitors (!). I&#39;m new to blogging, and suddenly having so many pageviews is… very surprising.

    Anyway, I got a few replies to this post. I discovered them as external links in Google Webmaster Tools. I did not have an &quot;[about me](http://aykevl.nl/about)&quot; page back then and I still haven&#39;t got [pingbacks](http://en.wikipedia.org/wiki/Pingback) or statistics of any form implemented, so GWT is the only way I can find out about links to my site.

    First of all, [Mark Senff](http://www.marksenff.com/front-end/even-more-elegant-fix-jumping-scrollbar-issue/) investigated it and provided an alternative solution:
    &lt;pre&gt;</code>html {<br>        width:100vw;<br>        overflow-x:hidden;<br>    }<br><br>This has the side-effects that it will hide the right part of the page as the scrollbar hides that part, and it will disable horizontal scrolling. So I personally would not use it.<br><br>My scrollbar trick is only intended for <em>centered content</em>, something that may not have been clear. The example he gives includes a header that takes up the full width of the browser screen and that is mostly left-aligned. Of course, such a header wouldn’t jump a lot. The text beneath, in comparison, would be well suited for it, and I found out the trick can be applied to a part of the page just fine. I’ve put an ugly example of that up at <a href="http://codepen.io/anon/pen/NPgbKP" target="_blank" rel="noopener">Codepen.io</a>.<br><br>Some other mentions on the web include:<br><br><em>   <a href="http://smithy.co/who-we-are/" target="_blank" rel="noopener">Edwin Smith</a> mentioned it on his blog on <a href="http://smithy.co/2014/12/fix-jumping-scrollbar-when-switching-pages/" target="_blank" rel="noopener">Smithy.com</a>.
</em>   <a href="http://codepen.io/elstgav/" target="_blank" rel="noopener">Gavin Elster</a> made a live (and good-looking) example on <a href="http://codepen.io/elstgav/details/myEJNv" target="_blank" rel="noopener">Codepen.io</a>. I forked that one to give the example above, but my version is very ugly in comparison :)<br>Thank you all!<br><br><em> </em> *<br><br>原文链接：<a href="http://aykevl.nl/2014/09/fix-jumping-scrollbar" target="_blank" rel="noopener">http://aykevl.nl/2014/09/fix-jumping-scrollbar</a>&nbsp;<br><br></article>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info">voya</span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info">http://www.voyax.meposts/20324/</span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="../../tags/CSS/">CSS</a></div></article><nav id="pagination"><div class="prev-post pull-left"><a href="../../posts/31494/"><i class="fa fa-chevron-left">  </i><span>在你需要嘶吼的年纪</span></a></div><div class="next-post pull-right"><a href="../../posts/57868/"><span>流浪的卡农</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">©2016 - 2018 By voya</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Hosted by - </span><a href="https://pages.coding.me/"><span>Coding Pages</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.3"></script><script src="/js/fancybox.js?version=1.3"></script><script src="/js/sidebar.js?version=1.3"></script><script src="/js/copy.js?version=1.3"></script><script src="/js/fireworks.js?version=1.3"></script><script src="/js/transition.js?version=1.3"></script><script src="/js/scroll.js?version=1.3"></script><script src="/js/head.js?version=1.3"></script></body></html>